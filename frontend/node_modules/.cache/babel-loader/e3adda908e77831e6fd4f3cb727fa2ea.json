{"ast":null,"code":"import _slicedToArray from \"/Users/ebensou/Cours/Projet 07.2020/Projet/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/ebensou/Cours/Projet 07.2020/Projet/frontend/src/components/Login.tsx\";\nimport React, { useState } from \"react\";\nimport { ctx } from \"../services/Context\";\nimport { Button, InputGroup, Tooltip } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport { Intent } from \"@blueprintjs/core/lib/esm/common/intent\";\nimport axios from \"axios\";\nimport { OurToaster } from \"./OurToaster\";\nexport const Login = observer(() => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        showPassword = _useState2[0],\n        setShowPassword = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        mail = _useState4[0],\n        setMail = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        password = _useState6[0],\n        setPassword = _useState6[1];\n\n  const lockButton = React.createElement(Tooltip, {\n    content: `${showPassword ? \"Hide\" : \"Show\"} Password`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: \"outline-style-d\",\n    icon: showPassword ? \"unlock\" : \"lock\",\n    intent: Intent.WARNING,\n    minimal: true,\n    onClick: () => setShowPassword(!showPassword),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }));\n\n  function loginSubmit(e) {\n    e.preventDefault();\n\n    if (formIsCorrect()) {\n      axios.get(`http://localhost:5000/users/${mail}/${password}`).then(response => {\n        ctx.store.setName(response.data.firstName + \" \" + response.data.lastName);\n        ctx.store.setRole(response.data.role);\n        ctx.store.setId(response.data.id);\n        OurToaster.show({\n          message: \"Successfully connected !\",\n          intent: Intent.SUCCESS,\n          timeout: 8000\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n      axios.get(`http://localhost:5000/users_pending/${mail}/${password}`).then(response => {\n        ctx.store.setName(response.data.firstName + \" \" + response.data.lastName);\n        ctx.store.setRole(response.data.role);\n        ctx.store.setId(response.data.id);\n        OurToaster.show({\n          message: \"Successfully connected !\",\n          intent: Intent.SUCCESS,\n          timeout: 8000\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n\n  function formIsCorrect() {\n    if (!mail.match(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/)) {\n      OurToaster.show({\n        message: \"Mail address isn't valid.\",\n        intent: Intent.DANGER\n      });\n      return false;\n    }\n\n    return true;\n  }\n\n  function validateForm() {\n    return mail.length > 0 && password.length > 0;\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: loginSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inputgroup fx -c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(InputGroup, {\n    leftIcon: \"user\",\n    placeholder: \"Username\",\n    required: true,\n    value: mail,\n    onChange: ev => setMail(ev.currentTarget.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(InputGroup, {\n    placeholder: \"Password\",\n    leftIcon: \"key\",\n    rightElement: lockButton,\n    type: showPassword ? \"text\" : \"password\",\n    required: true,\n    value: password,\n    onChange: ev => setPassword(ev.currentTarget.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(Button, {\n    className: \"outline-style-d\",\n    icon: \"tick-circle\",\n    type: \"submit\",\n    disabled: !validateForm(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Connection\"))));\n});","map":{"version":3,"sources":["/Users/ebensou/Cours/Projet 07.2020/Projet/frontend/src/components/Login.tsx"],"names":["React","useState","ctx","Button","InputGroup","Tooltip","observer","Intent","axios","OurToaster","Login","showPassword","setShowPassword","mail","setMail","password","setPassword","lockButton","WARNING","loginSubmit","e","preventDefault","formIsCorrect","get","then","response","store","setName","data","firstName","lastName","setRole","role","setId","id","show","message","intent","SUCCESS","timeout","catch","err","console","log","match","DANGER","validateForm","length","ev","currentTarget","value"],"mappings":"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","sourcesContent":["import React, { FunctionComponent, useState } from \"react\";\nimport { ctx } from \"../services/Context\";\nimport { Button, InputGroup, Tooltip } from \"@blueprintjs/core\";\nimport { observer } from \"mobx-react\";\nimport { Intent } from \"@blueprintjs/core/lib/esm/common/intent\";\nimport axios from \"axios\";\nimport { OurToaster } from \"./OurToaster\";\n\nexport const Login: FunctionComponent = observer(() => {\n  const [showPassword, setShowPassword] = useState(false);\n  const [mail, setMail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const lockButton = (\n    <Tooltip content={`${showPassword ? \"Hide\" : \"Show\"} Password`}>\n      <Button\n        className=\"outline-style-d\"\n        icon={showPassword ? \"unlock\" : \"lock\"}\n        intent={Intent.WARNING}\n        minimal={true}\n        onClick={() => setShowPassword(!showPassword)}\n      />\n    </Tooltip>\n  );\n\n  function loginSubmit(e: any) {\n    e.preventDefault();\n    if (formIsCorrect()) {\n      axios\n        .get(`http://localhost:5000/users/${mail}/${password}`)\n        .then(response => {\n          ctx.store.setName(\n            response.data.firstName + \" \" + response.data.lastName\n          );\n          ctx.store.setRole(response.data.role);\n          ctx.store.setId(response.data.id);\n\n          OurToaster.show({\n            message: \"Successfully connected !\",\n            intent: Intent.SUCCESS,\n            timeout: 8000\n          });\n        })\n        .catch(err => {\n          console.log(err);\n        });\n      axios\n        .get(`http://localhost:5000/users_pending/${mail}/${password}`)\n        .then(response => {\n          ctx.store.setName(\n            response.data.firstName + \" \" + response.data.lastName\n          );\n          ctx.store.setRole(response.data.role);\n          ctx.store.setId(response.data.id);\n\n          OurToaster.show({\n            message: \"Successfully connected !\",\n            intent: Intent.SUCCESS,\n            timeout: 8000\n          });\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    }\n  }\n\n  function formIsCorrect(): boolean {\n    if (!mail.match(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/)) {\n      OurToaster.show({\n        message: \"Mail address isn't valid.\",\n        intent: Intent.DANGER\n      });\n      return false;\n    }\n    return true;\n  }\n\n  function validateForm() {\n    return mail.length > 0 && password.length > 0;\n  }\n\n  return (\n    <div>\n      <form onSubmit={loginSubmit}>\n        <div className=\"inputgroup fx -c\">\n          <InputGroup\n            leftIcon=\"user\"\n            placeholder=\"Username\"\n            required={true}\n            value={mail}\n            onChange={(ev: any) => setMail(ev.currentTarget.value)}\n          />\n          <InputGroup\n            placeholder=\"Password\"\n            leftIcon=\"key\"\n            rightElement={lockButton}\n            type={showPassword ? \"text\" : \"password\"}\n            required={true}\n            value={password}\n            onChange={(ev: any) => setPassword(ev.currentTarget.value)}\n          />\n          <Button\n            className=\"outline-style-d\"\n            icon=\"tick-circle\"\n            type=\"submit\"\n            disabled={!validateForm()}\n          >\n            Connection\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}